name: benchmark
services:
  hev-socks5-client:
    build:
      context: tools/hev-socks5-tunnel
    container_name: hev-socks5-client
    image: heiher/hev-socks5-tunnel
    restart: unless-stopped
    cap_add:
      - NET_ADMIN
    devices:
      - '/dev/net/tun:/dev/net/tun'
    environment:
      MTU: 1500
      SOCKS5_ADDR: ${IPV4_ADDRESS_SOCKS_SERVER_TARGET}
      SOCKS5_PORT: "1080"
      SOCKS5_UDP_MODE: "tcp"
      IPV4_EXCLUDED_ROUTES: "0.0.0.0/0"
      LOG_LEVEL: debug
    network_mode: container:dns-tunnel-client
    healthcheck:
      test: "exit 0"
    depends_on:
      - dns-tunnel-client
